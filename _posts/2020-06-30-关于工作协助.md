---
layout: post
title: 关于工作协助
date: 2021-06-30
tags: 思考  
---

## Life
当公司走下坡路的时候，更多的是因为大家不再团结一心，去把事情搞好，而是每个人，每个团队，都守着自己的那点地盘，各自为政


## 脚本防护
从19年开始，我们探索了脚本防护，最近一段时间，需要把功能移植到edr里面，因为需要注入到别的模块里面，所以还是需要求助别的团队去帮忙配合注入。其实这个事情，我们自己能搞，也有现成的代码，但是出于架构和统一性，从设计的角度来说，会比较好一些。于是，就发邮件请求对方帮忙给注入一下。暂且称他们为p哥，和w哥

## 问题焦点
因为是要注入服务，宿主程序是svchost.exe，P跟W没有现有的机制，来支持注入某一个服务，例如wmi服务。于是提出了一种两种方案，一种是查询到服务所在的pid后，直接注入。另一种是每一个svchost.exe都注入，代码自己内部判断是哪个服务。

## 方案之争
刨除私心，其实第一种方案是更好的，精确的判断，然后注入，省去了不少其它的事情。第二种方案，会被注入到很多无辜的进程中，而在win10上面，这些进程大约有70个！但是在邮件的往复中，P跟W表现出了要支持第二种方案的想法，原因是，目前的机制，支持这种比较简单。W哥的原话
```
注入时机早的好，可以在你需要hook的dll加载时做hook，可靠性最好；
如果要根据服务名查进程pid，然后再通过ioctl给驱动，再让驱动注入，线上的驱动注入是完成不了的，得另外开发一套；

只要那几个需要的进程未开启auditBlockNonMicrosoftBinaries，目前线上的注入机制是能满足你们的要求的
```
我不知道该怎么回复，自己实现不好么。

## 业绩之果
从他们的角度来说，这么说是没有问题的，因为这只是帮忙注入而已，并不是他们自己的OKR，只要能让你用上，给你注入就行了呗。每个人，手头都是有一大堆的工作要做，为什么要为了别人的事情，费心费力，最后做完了也没有什么回报。从初衷来说，我们是应该秉承着把整个项目，架构完善的角度去做的。有时候，我不禁在想，当新的需求出现的时候，是应该凑活堆代码，还是认真的重构下之前的逻辑，支持新的需求。难道我们就该都一样，放弃维护性，放弃合理性，只是为了完成这个项目，完成年初承诺的okr。部门之间的相互沟通，配合，只是我只愿意帮你到这一步，多的自己想办法么？

## 回想之前
我们小组曾不止一次的，帮助别的团队分析一些东西，开发一些东西。有时候，我们甚至帮别人把完整的代码给逆向出来，既然来让我们帮忙，我们也是想尽可能的把这件事情做好。出于私心，我们可以不帮忙，只要把自己的工作做好，我闲着，待着干点啥不好呢。但是出于公心，出于态度，有一天，我们自己可能也会去开一家公司，难道我们都希望，招的人，都是干自己的工作，相互不协助的么。那还要那么多内部公共库，公共代码干什么，直接自己造轮子不好么，还不用求人。

## 重新认识自己
写这些东西，不是为了抱怨，而是为了，让我们都能塑造一个正向的自己。树立一个正确的态度，不管对待任何人，任何事情。做什么事情，有大局观。而不是守护着自己的那点想法。
儒释道讲的是内在，经济学讲的是人。或许每个人都应该去认真的看一些这些书籍。去重新认识下自己